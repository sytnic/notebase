## Пересбор приложения и БД

Если случайно удалил БД в Админере или требуется пересобрать приложение с некоторыми изменениями, например, в кодировке БД, то:

- следует удалить расшареную с докером и контейнерами папку dbfiles, она указывается в docker-compose.yml как

```
    volumes:  
        - ./dbfiles:/var/lib/mysql
```

Удаление dbfiles требуется, т.к. иначе в ней сохраняются все предыдущие данные (в том числе всё, что уже отсутствует на сервере в контейнере). Переустановка контейнеров и образа не поможет.  
Можно удалить все файлы из папки, не удаляя папку.


- остановить контейнеры:

    docker-compose stop

- удалить контейнеры, находясь в этой же папке с проектом: 

    docker-compose down 

Можно, но не обязательно, удалить образы. В принципе не нужно, т.к. они не влияют на пересбор БД и приложения.

- удалить images вручную

На этом этапе, до нового запуска контейнеров, можно внести изменения в docker-compose.yml, например, для добавления кодировки БД:

    volumes:
        - ./dbfiles:/var/lib/mysql
    command:
        - --character-set-server=utf8mb4
        - --collation-server=utf8mb4_unicode_ci

или так:

    volumes:
        - ./dbfiles:/var/lib/mysql
    command:
        - --character-set-server=utf8
        - --collation-server=utf8_unicode_ci


- запустить контейнеры
```
    docker-compose build  
    docker-compose up -d
```

